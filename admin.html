<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Qu·∫£n tr·ªã admin</title>
  <link rel="stylesheet" href="css/Style.css" />
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <a href="index.html" class="logo">
      <img src="img/logo_light_V2N.png" alt="Homepage Logo">
    </a>
    <a href="#" class="active">Trang Ch·ªß</a>
    <a href="#">S·∫£n Ph·∫©m</a>
    <a href="#">L·ªãch S·ª≠ Mua H√†ng</a>
    <a href="#">N·∫°p Th·∫ª C√†o</a>
    <a href="#">V√≠ ƒêi·ªán T·ª≠</a>
    <a href="#">B√†i Vi·∫øt</a>
    <a href="#">Li√™n H·ªá</a>
    <a href="settingadmin.html">Qu·∫£n L√Ω Admin</a>
  </div>
  <!-- Main Content -->
  <div class="main-content">
    <!-- Header -->
    <div class="header">
      <div class="left">
        <button class="promo-btn">üí∞ CLICK V√ÄO ƒê√ÇY XEM KHUY·∫æN M√ÉI</button>
      </div>
      <div class="right">
        <button class="btn" onclick="window.open('https://zalo.me/123456789', '_blank')">
          Tham Gia Nh√≥m H·ªó Tr·ª£ ZALO
        </button>
        <button class="btn">H∆∞·ªõng D·∫´n Mua Tool</button>
        <div class="user-dropdown">
          <div class="user-trigger" onclick="toggleDropdown()">
            <img src="img/user.png" alt="User Avatar" class="avatar">
            <span id="username">Ch∆∞a ƒëƒÉng nh·∫≠p</span>
            <span class="arrow">‚ñº</span>
          </div>
          <div id="dropdownMenu" class="dropdown-menu">
            <a href="#">S·ªë d∆∞</a>
            <a href="#">Bi·∫øn ƒë·ªông s·ªë d∆∞</a>
            <a href="#">L·ªãch s·ª≠ ho·∫°t ƒë·ªông</a>
            <a href="#" id="logout">ƒêƒÉng xu·∫•t</a>

<script>
  document.getElementById('logout').addEventListener('click', function() {
    // X√≥a th√¥ng tin ƒëƒÉng nh·∫≠p (v√≠ d·ª•: localStorage ho·∫∑c sessionStorage)
    localStorage.removeItem('userToken'); // N·∫øu s·ª≠ d·ª•ng localStorage
    sessionStorage.removeItem('userToken'); // N·∫øu s·ª≠ d·ª•ng sessionStorage

    // Chuy·ªÉn h∆∞·ªõng trang sau khi ƒëƒÉng xu·∫•t
    window.location.href = 'index.html';
  });
</script>
          </div>
        </div>
      </div>
    </div>

    <div class="content">
    
    </div>

    <div class="footer">
      All Rights Reserved by <b>WUANGVINH.ID.VN</b>. Designed and Developed by <span class="highlight">WUANGVINH 1.1</span>
    </div>
  </div>

  <!-- Modal khuy·∫øn m√£i -->
  <div id="promoModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <h2 class="modal-title">Th√¥ng b√°o</h2>
      </div>
      <div class="modal-body">
        <h3 class="promo-title">Khuy·∫øn m√£i n·∫°p</h3>
        <p class="promo-highlight">üíñ ƒê·∫∂C BI·ªÜT KM N·∫†P X2 ƒê·∫æN H·∫æT NG√ÄY 23/11/2024 üíñ</p>
        <ul class="promo-list">
          <li>N·∫°p tr√™n 300k ‚Üí <span class="promo-bold">nh·∫≠n th√™m 50k</span></li>
          <li>N·∫°p tr√™n 500k ‚Üí <span class="promo-bold">nh·∫≠n th√™m 150k</span></li>
        </ul>
        <p class="promo-note">
          <span class="promo-bold">ƒê·∫∑c bi·ªát:</span> share b√†i vi·∫øt v√†o 2 group + th·∫£ tim + follow page + tag t√™n 2 ng∆∞·ªùi b·∫°n ‚Üí ƒë∆∞·ª£c <span class="promo-bold">+30% n·∫°p ti·ªÅn</span><br>
          Link: <a href="https://www.facebook.com/share/p/IEgZuoRXyw/" target="_blank">Xem b√†i vi·∫øt khuy·∫øn m√£i</a>
        </p>
      </div>
      <div class="modal-footer">
        <button onclick="closeModal()">ƒê√≥ng</button>
        <button onclick="closeModalFor2Hours()">T·∫Øt trong 2 gi·ªù</button>
      </div>
    </div>
  </div>

  <script>
    // Ki·ªÉm tra ph√¢n quy·ªÅn ng∆∞·ªùi d√πng ngay khi trang Admin ƒë∆∞·ª£c load
    if (!localStorage.getItem("token") || localStorage.getItem("role") !== "Admin") {
      window.location.href = "login.html";  // N·∫øu kh√¥ng ph·∫£i Admin, chuy·ªÉn ƒë·∫øn trang ƒëƒÉng nh·∫≠p
    }

    // C·∫≠p nh·∫≠t t√™n ng∆∞·ªùi d√πng ƒëƒÉng nh·∫≠p
    window.onload = function() {
      const username = localStorage.getItem("username");
      if (username) {
        document.getElementById("username").textContent = username;
      }
    };

    // ƒêƒÉng xu·∫•t
    function logout() {
      localStorage.removeItem("token");
      localStorage.removeItem("username");
      localStorage.removeItem("role");
      window.location.href = "login.html";  // Chuy·ªÉn h∆∞·ªõng v·ªÅ trang ƒëƒÉng nh·∫≠p sau khi ƒëƒÉng xu·∫•t
    }

    // Modal khuy·∫øn m√£i
    const promoModal = document.getElementById("promoModal");
    const btn = document.querySelector(".promo-btn");

    btn.addEventListener("click", () => {
      promoModal.style.display = "block";
    });

    function closeModal() {
      promoModal.style.display = "none";
    }

    function closeModalFor2Hours() {
      const hideUntil = new Date().getTime() + 2 * 60 * 60 * 1000;
      localStorage.setItem("promoModalHideUntil", hideUntil.toString());
      closeModal();
    }

    window.onclick = function(event) {
      if (event.target === promoModal) closeModal();
    };

    // Dropdown toggle
    function toggleDropdown() {
      const menu = document.getElementById("dropdownMenu");
      menu.classList.toggle("show");
    }

    // Click ra ngo√†i dropdown th√¨ t·∫Øt
    window.addEventListener("click", function(event) {
      if (!event.target.closest(".user-dropdown")) {
        document.getElementById("dropdownMenu").classList.remove("show");
      }
    });
  </script>
</body>
</html>
